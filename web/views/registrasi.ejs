<!DOCTYPE html>  
<html lang="id">  
<head>  
    <meta charset="UTF-8" />  
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />  
    <title>AcneSense - Registrasi Akun</title>  
    <script src="https://cdn.tailwindcss.com"></script>  
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>  
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet" />  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />  
    <style>  
        body, html {  
            overscroll-behavior: none;  
            -webkit-overflow-scrolling: touch;  
            background-color: #d6ebd5;  
            margin: 0;  
            padding: 0;  
            font-family: "Poppins", sans-serif;  
        }  

        .input-style {  
            width: 100%;  
            padding: 12px;  
            border: 1px solid #ccc;  
            border-radius: 8px;  
            font-size: 14px;  
            transition: border-color 0.2s;  
        }  

        .input-style:focus {  
            border-color: #40c057;  
            outline: none;  
        }  

        .submit-button {  
            width: 100%;  
            padding: 15px;  
            background-color: #546254;  
            color: white;  
            border: none;  
            border-radius: 10px;  
            font-weight: 600;  
            font-size: 16px;  
            cursor: pointer;  
        }  
    </style>  
</head>  
<body>  
    <!-- Mobile version -->  
    <div class="block md:hidden w-full min-h-screen bg-white mx-auto flex flex-col relative overflow-hidden">  
        <!-- Top curve background -->  
        <div class="absolute top-0 left-0 w-full h-[150px] bg-gradient-to-b from-[#D6EBD5] to-white rounded-b-[50px] -z-10"></div>  
        
        <!-- Background Dots -->  
        <div class="absolute top-[-50px] right-[-80px] w-[160px] h-[160px] bg-[#05FF05FF] rounded-full opacity-20 pointer-events-none"></div>  
        <div class="absolute bottom-[-130px] left-[-130px] w-[200px] h-[200px] bg-[#03FF03FF] rounded-full opacity-15 pointer-events-none"></div>  
        <div class="absolute top-[5%] left-[-40px] w-[80px] h-[80px] bg-[#00FF00FF] rounded-full opacity-10 pointer-events-none"></div>  
        <div class="absolute top-[5%] right-[10px] w-[80px] h-[80px] bg-[#00FF00FF] rounded-full opacity-10 pointer-events-none"></div>  

        <div class="text-center pt-10 pb-2">  
            <div class="text-2xl font-extrabold text-black">  
                Acne<span class="text-[#40c057]">Sense</span>  
            </div>  
            <div class="text-xs text-gray-500 mb-5">For Your Acne Solution</div>  
        </div>  

        <div class="text-center px-6">  
            <h1 class="text-xl font-bold mb-2">Registrasi Akun</h1>  
            <h2 class="text-sm text-gray-600 mb-6">Selamat datang di Acne Sense</h2>  
        </div>  

        <div class="px-7 flex flex-col flex-grow">  
            <form id="registrationFormMobile" class="flex flex-col flex-grow">  
                <div class="mb-5">  
                    <label for="fullname-mobile" class="block mb-2 text-gray-800 font-medium text-[15px]">Nama Lengkap</label>  
                    <input   
                        id="fullname-mobile"  
                        name="fullname"  
                        type="text"  
                        placeholder="Masukkan Nama Lengkap"  
                        required  
                        class="w-full px-3 py-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#40c057]"  
                    />  
                </div>  

                <div class="mb-5">  
                    <label for="email-mobile" class="block mb-2 text-gray-800 font-medium text-[15px]">Email</label>  
                    <input   
                        id="email-mobile"  
                        name="email"  
                        type="email"  
                        placeholder="Masukkan Email"  
                        required  
                        class="w-full px-3 py-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#40c057]"  
                    />  
                </div>  

                <div class="mb-5">  
                    <label for="birthdate-mobile" class="block mb-2 text-gray-800 font-medium text-[15px]">Tanggal Lahir</label>  
                    <input   
                        id="birthdate-mobile"  
                        name="birthdate"  
                        type="date"  
                        required  
                        class="w-full px-3 py-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#40c057]"  
                    />  
                </div>  

                <div class="mb-5 relative">  
                    <label for="password-mobile" class="block mb-2 text-gray-800 font-medium text-[15px]">Password</label>  
                    <div class="relative w-full">  
                        <input   
                            id="password-mobile"  
                            name="password"  
                            type="password"  
                            placeholder="Masukkan Password"  
                            required  
                            class="w-full px-3 py-3 pr-10 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#40c057]"  
                        />  
                        <button  
                            type="button"  
                            aria-label="Toggle password visibility"  
                            id="togglePasswordMobile"  
                            class="absolute right-3 top-1/2 -translate-y-1/2 bg-transparent border-none cursor-pointer p-0 text-gray-600 text-base"  
                        >  
                            <i class="fas fa-eye"></i>  
                        </button>  
                    </div>  
                </div>  

                <div class="mb-5 relative">  
                    <label for="confirm-password-mobile" class="block mb-2 text-gray-800 font-medium text-[15px]">Konfirmasi Password</label>  
                    <div class="relative w-full">  
                        <input   
                            id="confirm-password-mobile"  
                            name="confirmPassword"  
                            type="password"  
                            placeholder="Konfirmasi Password"  
                            required  
                            class="w-full px-3 py-3 pr-10 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#40c057]"  
                        />  
                        <button  
                            type="button"  
                            aria-label="Toggle confirm password visibility"  
                            id="toggleConfirmPasswordMobile"  
                            class="absolute right-3 top-1/2 -translate-y-1/2 bg-transparent border-none cursor-pointer p-0 text-gray-600 text-base"  
                        >  
                            <i class="fas fa-eye"></i>  
                        </button>  
                    </div>  
                </div>  

                <div class="flex justify-between text-sm text-gray-600 mb-5 select-none">  
                    <a href="/login"><span>Sudah punya akun? Login</span></a>  
                </div>  

                <button  
                    type="submit"  
                    class="w-full py-4 bg-[#546254] text-white rounded-xl font-semibold text-base hover:bg-[#43543d] transition-colors relative z-10"  
                >  
                    Registrasi  
                </button>  
            </form>  
        </div>  

        <!-- Bottom curve background -->  
        <div class="absolute bottom-0 left-0 w-full h-[150px] bg-gradient-to-t from-[#D6EBD5] to-white rounded-t-[50px] -z-10"></div>  
    </div>  

    <!-- Desktop Container -->
<div class="hidden md:flex min-h-screen bg-[#D6EBD5] items-center justify-center p-4">
    <div class="w-[1100px] bg-white rounded-[20px] grid grid-cols-2 overflow-hidden shadow-lg">
        <!-- Left Side (Form) -->
        <div class="px-16 py-12 flex flex-col justify-center">
            <div class="text-center mb-8">
               <h1 class="text-center text-3xl font-bold mb-2">
                        Acne<span class="text-[#40c057]">Sense</span>
                    </h1>
                    <p class="text-center text-sm text-gray-600 mb-8">For Your Acne Solution</p>
                    
                    <h2 class="text-center text-2xl font-bold mb-4">Registrasi Akun</h2>
                    <p class="text-center text-gray-600 mb-8">Selamat datang di Acne Sense</p>
            </div>

            <form id="registrationFormDesktop" class="space-y-4">
                <div>
                    <label class="block text-sm mb-2">Nama Lengkap</label>
                    <input 
                        type="text" 
                        name="fullname" 
                        placeholder="Masukkan Nama Lengkap" 
                        required
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#40c057]"
                    />
                </div>

                <div>
                    <label class="block text-sm mb-2">Email</label>
                    <input 
                        type="email" 
                        name="email" 
                        placeholder="Masukkan Email" 
                        required
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#40c057]"
                    />
                </div>

                <div>
                    <label class="block text-sm mb-2">Tanggal Lahir</label>
                    <input 
                        type="date" 
                        name="birthdate" 
                        required
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#40c057]"
                    />
                </div>

                <div>
                    <label class="block text-sm mb-2">Password</label>
                    <div class="relative">
                        <input 
                            type="password" 
                            name="password" 
                            placeholder="Masukkan Password" 
                            required
                            id="password-desktop"
                            class="w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#40c057]"
                        />
                        <button 
                            type="button"
                            id="togglePasswordDesktop"
                            class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500"
                        >
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>

                <div>
                    <label class="block text-sm mb-2">Konfirmasi Password</label>
                    <div class="relative">
                        <input 
                            type="password" 
                            name="confirmPassword" 
                            placeholder="Konfirmasi Password" 
                            required
                            id="confirm-password-desktop"
                            class="w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#40c057]"
                        />
                        <button 
                            type="button"
                            id="toggleConfirmPasswordDesktop"
                            class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500"
                        >
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>

                <button 
                    type="submit" 
                    class="w-full bg-[#546254] text-white py-3 rounded-lg hover:bg-opacity-90 transition-colors mt-4"
                >
                    Register
                </button>

                <div class="text-center mt-4">
                    <span class="text-sm">Sudah punya akun? </span>
                    <a href="/login" class="text-[#40c057] text-sm font-semibold">Login disini</a>
                </div>
            </form>
        </div>

        <!-- Right Side (Image) -->
        <div>
            <img 
                src="/image/login.png" 
                alt="AcneSense Register" 
                class="w-full h-full object-cover"
            />
        </div>
    </div>
</div>

    <script>  
        // Toggle password visibility for mobile  
        const passwordInputMobile = document.getElementById("password-mobile");  
        const togglePasswordBtnMobile = document.getElementById("togglePasswordMobile");  
        const confirmPasswordInputMobile = document.getElementById("confirm-password-mobile");  
        const toggleConfirmPasswordBtnMobile = document.getElementById("toggleConfirmPasswordMobile");  

        togglePasswordBtnMobile.addEventListener("click", () => {  
            const type = passwordInputMobile.getAttribute("type") === "password" ? "text" : "password";  
            passwordInputMobile.setAttribute("type", type);  
            togglePasswordBtnMobile.innerHTML = type === "password"   
                ? '<i class="fas fa-eye"></i>'   
                : '<i class="fas fa-eye-slash"></i>';  
        });  

        toggleConfirmPasswordBtnMobile.addEventListener("click", () => {  
            const type = confirmPasswordInputMobile.getAttribute("type") === "password" ? "text" : "password";  
            confirmPasswordInputMobile.setAttribute("type", type);  
            toggleConfirmPasswordBtnMobile.innerHTML = type === "password"   
                ? '<i class="fas fa-eye"></i>'   
                : '<i class="fas fa-eye-slash"></i>';  
        });  

        // Toggle password visibility for desktop  
        const passwordInputDesktop = document.getElementById("password-desktop");  
        const togglePasswordBtnDesktop = document.getElementById("togglePasswordDesktop");  
        const confirmPasswordInputDesktop = document.getElementById("confirm-password-desktop");  
        const toggleConfirmPasswordBtnDesktop = document.getElementById("toggleConfirmPasswordDesktop");  

        togglePasswordBtnDesktop.addEventListener("click", () =>       togglePasswordBtnDesktop.addEventListener("click", () => {
            const type = passwordInputDesktop.getAttribute("type") === "password" ? "text" : "password";
            passwordInputDesktop.setAttribute("type", type);
            togglePasswordBtnDesktop.innerHTML = type === "password" 
                ? '<i class="fas fa-eye"></i>' 
                : '<i class="fas fa-eye-slash"></i>';
        }));

        toggleConfirmPasswordBtnDesktop.addEventListener("click", () => {
            const type = confirmPasswordInputDesktop.getAttribute("type") === "password" ? "text" : "password";
            confirmPasswordInputDesktop.setAttribute("type", type);
            toggleConfirmPasswordBtnDesktop.innerHTML = type === "password" 
                ? '<i class="fas fa-eye"></i>' 
                : '<i class="fas fa-eye-slash"></i>';
        });

        // Function to handle form submission for both mobile and desktop forms
        async function handleRegistration(formData) {
            const registrationData = {
                fullname: formData.get('fullname'),
                email: formData.get('email'),
                birthdate: formData.get('birthdate'),
                password: formData.get('password'),
                confirmPassword: formData.get('confirmPassword')
            };

            // Client-side validation
            if (registrationData.password !== registrationData.confirmPassword) {
                Swal.fire({
                    icon: 'error',
                    title: 'Password Tidak Cocok!',
                    text: 'Password dan konfirmasi password tidak cocok!'
                });
                return;
            }
            
            if (registrationData.password.length < 6) {
                Swal.fire({
                    icon: 'error',
                    title: 'Password Terlalu Pendek!',
                    text: 'Password minimal 6 karakter!'
                });
                return;
            }

            // Show loading
            Swal.fire({
                title: 'Mendaftarkan Akun...',
                text: 'Mohon tunggu sebentar',
                allowOutsideClick: false,
                showConfirmButton: false,
                willOpen: () => {
                    Swal.showLoading();
                }
            });

            try {
                const response = await fetch('/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(registrationData)
                });

                const result = await response.json();

                if (result.success) {
                    Swal.fire({
                        icon: 'success',
                        title: 'Registrasi Berhasil!',
                        text: result.message,
                        confirmButtonText: 'Login Sekarang'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            window.location.href = '/login';
                        }
                    });
                } else {
                    Swal.fire({
                        icon: 'error',
                        title: 'Registrasi Gagal!',
                        text: result.message
                    });
                }
            } catch (error) {
                console.error('Error:', error);
                Swal.fire({
                    icon: 'error',
                    title: 'Error!',
                    text: 'Terjadi kesalahan pada server'
                });
            }
        }

        // Mobile form submission
        document.getElementById('registrationFormMobile').addEventListener('submit', async function(e) {
            e.preventDefault();
            const formData = new FormData(this);
            await handleRegistration(formData);
        });

        // Desktop form submission
        document.getElementById('registrationFormDesktop').addEventListener('submit', async function(e) {
            e.preventDefault();
            const formData = new FormData(this);
            await handleRegistration(formData);
        });
    </script>
</body>
</html>
